<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tangl.heartbeatai.mapper.TbUserMapper">
    <!-- 根据原始手机号查询用户（反向脱敏匹配） -->
    <select id="selectByPhone" resultType="com.tangl.heartbeatai.entity.TbUser">
        SELECT *
        FROM tb_user
        WHERE phone = CONCAT(
                LEFT(#{phone}, 3),
                '****',
                RIGHT(#{phone}, 4)
                      )
          AND status = 1
    </select>
</mapper>